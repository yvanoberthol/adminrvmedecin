<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="commons/header::common-header"/>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-8 offset-md-2 col-sm-12 col-xm-12">
		<div th:insert="commons/header::myheader"></div>
			<h1 class="grand-titre">Details sur le domaine <span th:text="${specialite.getNom()}" class="text-info" style="font-weight: bolder"></span></h1>
			<button type="button" class="btn btn-danger coulisseur" data-toggle="collapse" data-target="#description"><span class="fa fa-minus"></span> Cacher</button> les détails sur le domaine
			<div th:utext="${specialite.getDesription()}" id="description" 
			class="collapse" style="border: 2px solid black; margin-top: 20px">
			
			</div>
			<div>
				<ul class="breadcrumb">
				  <li class="breadcrumb-item"><a href="" data-toggle="modal" data-target="#formDescription" style="margin-left:40px">Le modifier</a></li>
				  <li class="breadcrumb-item"><a th:href="@{/specialites}">Retour à la liste des domaines</a></li>
				  <li class="breadcrumb-item"><a href="" data-toggle="collapse" data-target="#medecinDomain">Avoir la liste des médécins de ce domaine</a></li>
				</ul>		
				<!-- The Modal -->
				<div class="modal" id="formDescription">
				  <div class="modal-dialog modal-lg">
				    <div class="modal-content">
				
				      <!-- Modal Header -->
				      <div class="modal-header text-center">
				        <h4 class="modal-title">Modifier la description de ce domaine</h4>
				        <button type="button" class="close" data-dismiss="modal">&times;</button>
				      </div>
				
				      <!-- Modal body -->
				      <form th:action="@{/modifSpecialite}" method="POST">
				      <div class="modal-body">
					        <div class="row">
								<div class="col-md-8 offset-md-2">
									<h1><span th:text="${specialite.getNom()}" class="text-info"></span></h1>		
										<input type="hidden" name="id" th:value="${specialite.getId()}">
										<input type="hidden" name="nom" th:value="${specialite.getNom()}">
										<div class="form-group">
											<label class="control-label">Description de la spécialité</label>
											<textarea rows="10" cols="15" name="desription" th:text="${specialite.getDesription()}" 
											th:value="${specialite.getDesription()}" id="description-domain" >
											</textarea>
										</div>
								</div>
							</div>
				      </div>
				
				      <!-- Modal footer -->
				      <div class="modal-footer">
				      	<button type="submit" class="btn btn-info"><span class="fa fa-edit"></span> Modifier</button>
				        <button type="button" class="btn btn-danger" data-dismiss="modal"><span class="fa fa-times-circle"></span> Close</button>
				      </div>
				      </form>
				
				    </div>
				  </div>
				</div>
			</div>
			<div id="medecinDomain" class="collapse fade">
				<div class="table-responsive">
					<table class="table table-bordered">
						<tr class="text-center">
							<th colspan="2">
								Nom(s) et prénom(s) des médécins de ce domaine
							</th>
							<th>
								Total: <span class="text-info" th:text=${medecins.totalElements}></span>
							</th>
						</tr>
						<tr class="text-center" th:each="medecin:${medecins.content}" th:if="${medecins.totalElements > 0}">
							<td colspan="2" th:text="${medecin.getNom()}+' '+${medecin.getPrenom()}"></td>
							<td><a th:href="@{/detailMedecin(id=${medecin.getId()})}">Avoir des détails</a></td>
						</tr>
						<tr th:if="${medecins.totalElements == 0}">
							<td colspan="5" class="text-center"><h3 class="text-danger">Aucun médécin trouvé ...</h3></td>
						</tr>
					</table>
				</div>
				<div>
					<ul th:if="${medecins.totalPages > 0}" class="pagination">
						<li class="page-item" th:classappend="${medecins.number < 1} ? disabled">
							<a class="page-link" th:href="@{/detailSpecialite(size=${medecins.size}, page=${medecins.number}, id=${specialite.getId()})}"><span class="fa fa-angle-double-left"></span> Previous</a>
						</li>
				    	<li th:each="pageNumber : ${pageNumbers}" th:classappend="${pageNumber==medecins.number + 1} ? active" class="page-item">
				    		<a th:href="@{/detailSpecialite(size=${medecins.size}, page=${pageNumber},id=${specialite.getId()})}"
					        th:text=${pageNumber} class="page-link">
				       		</a>
				    	</li>
				    	<li class="page-item" th:classappend="${medecins.totalPages == medecins.number + 1} ? disabled">
							<a class="page-link" th:href="@{/detailSpecialite(size=${medecins.size}, page=${medecins.number + 2}, id=${specialite.getId()})}">Next <span class="fa fa-angle-double-right"></span></a>
						</li> 
					</ul>	
				</div>
			</div>
		</div>
	</div>
</div>
<div th:replace="commons/footer::body-common-scripts"></div>
<script>

$(document).ready(function(){
	$("#description").collapse('show');
	$("#description").on("show.bs.collapse", function(){
	    $(".coulisseur").html('<span class="fa fa-minus"></span> Cacher');
	    $(".coulisseur").removeClass("btn-info").addClass("btn-danger");
	 });
	 $("#description").on("hide.bs.collapse", function(){
	    $(".coulisseur").html('<span class="fa fa-plus-circle"></span> Afficher');
	    $(".coulisseur").removeClass("btn-danger").addClass("btn-info");
	 });
	 $("#medecinDomain").collapse('hide');
});
</script>
<script>
        ClassicEditor
            .create( document.querySelector( '#description-domain' ) )
            .catch( error => {
                console.error( error );
            } );
</script>
</body>
</html>